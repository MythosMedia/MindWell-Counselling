<!doctype html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">

  <title>Blog Details –blog_details</title>
  <link rel="shortcut icon"
    href="https://res.cloudinary.com/df2fe2yzk/image/upload/v1728644654/Mindwell_favicon-14_rmb67s.png">

  <!-- Fraimwork - CSS Include -->
  <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">

  <!-- Icon Font - CSS Include -->
  <link rel="stylesheet" type="text/css" href="assets/css/fontawesome.min.css">

  <!-- Animation - CSS Include -->
  <link rel="stylesheet" type="text/css" href="assets/css/animate.min.css">

  <!-- Cursor - CSS Include -->
  <link rel="stylesheet" type="text/css" href="assets/css/cursor.min.css">

  <!-- Carousel - CSS Include -->
  <link rel="stylesheet" type="text/css" href="assets/css/slick.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/slick-theme.min.css">

  <!-- Video & Image Popup - CSS Include -->
  <link rel="stylesheet" type="text/css" href="assets/css/magnific-popup.min.css">

  <!-- Counter - CSS Include -->
  <link rel="stylesheet" type="text/css" href="assets/css/odometer.min.css">

  <!-- Custom - CSS Include -->
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">

</head>


<body>

  <!-- Body Wrap - Start -->
  <div class="page_wrapper">

    <!-- Back To Top - Start -->
    <div class="backtotop">
      <a href="#" class="scroll">
        <i class="fa-solid fa-arrow-up"></i>
      </a>
    </div>
    <!-- Back To Top - End -->

    <header class="site_header">
      <div class="container">
        <div class="row align-items-center justify-content-between">
          <div class="col-lg-3 col-6">
            <div class="site_logo">
              <a class="site_link" href="index.html">
                <img
                  src="https://res.cloudinary.com/df2fe2yzk/image/upload/w_120,h_80/v1729085828/Mindwell_logo-15_ezhxjw.svg"
                  alt="Site Logo – Mindwell – Psychotherapist Site Template" width="200" height="100">
              </a>
            </div>
          </div>

          <div class="col-lg-5 d-none d-lg-block">
            <nav class="main_menu navbar navbar-expand-lg">
              <div class="main_menu_inner collapse navbar-collapse justify-content-center" id="main_menu_dropdown">
                <ul class="main_menu_list unordered_list">
                  <li class="active">
                    <a class="nav-link" href="index.html">Home</a>
                  </li>
                  <li class="dropdown">
                    <a class="nav-link" href="#" id="programs_submenu" role="button" data-bs-toggle="dropdown"
                      aria-expanded="false">
                      Services
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="programs_submenu">
                      <li><a href="Individual-Therapy.html">Individual Counselling</a></li>
                      <li><a href="Couples-counselling.html">Couples Counselling</a></li>
                      <li><a href="Trauma-Counselling.html">Trauma Counselling</a></li>
                    </ul>
                  </li>
                  <li><a class="nav-link" href="about.html">About</a></li>
                    <li><a class="nav-link" href="blog.html">Blog</a></li>
                  <li><a href="/contact.html">Contact</a></li>
                </ul>
              </div>
            </nav>
          </div>

          <div class="col-lg-4 col-6 d-flex align-items-center justify-content-end flex-nowrap">
            <button class="mobile_menu_btn d-lg-none me-2" type="button" data-bs-toggle="collapse"
              data-bs-target="#main_menu_dropdown" aria-expanded="false" aria-label="Toggle navigation">
              <i class="far fa-bars"></i>
            </button>

            <a class="btn_hotline me-2 d-none d-lg-inline-flex" href="tel:604-914-2141">
              <span class="btn_icon">
                <i class="fa-solid fa-phone"></i>
              </span>
              <span class="btn_text">604-914-2141</span>
            </a>

            <a class="btn_hotline green-bold" href="https://mindwellcounselling.janeapp.com/login"
              style="border:1px solid #556a5f;padding:7px 20px;border-radius: 8px; min-width: 120px; text-align: center;">
              Book Now
            </a>
          </div>
        </div>
      </div>
    </header>
    <!-- Main Body - Start
      ================================================== -->
    <main class="page_content">

      <!-- Page Banner - Start
        ================================================== -->
      <section class="page_banner decoration_wrapper">
        <div class="container">
          <h1 class="page_title" id="blog-banner-title">Loading...</h1>
          <ul class="breadcrumb_nav unordered_list justify-content-center justify-content-lg-start">
            <li><a href="index.html">Home</a></li>
            <li>Blog Details</li>
          </ul>
        </div>
        <div class="decoration_item shape_leaf_1"></div>
        <div class="decoration_item shape_leaf_2">
          <img src="assets/images/shapes/shape_leaf_right.svg"
            alt="Shape Leaf - Mindwell - Psychotherapist Site Template">
        </div>
      </section>
      <script>
        document.addEventListener('DOMContentLoaded', function () {
          function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
          }

          const postSlug = getQueryParam('slug');

          if (postSlug) {
            const postApiUrl = `https://blog.mindwellcounselling.ca/wp-json/wp/v2/posts?slug=${postSlug}`;

            fetch(postApiUrl)
              .then(response => response.json())
              .then(posts => {
                if (posts.length > 0) {
                  document.getElementById('blog-banner-title').textContent = posts[0].title.rendered;
                }
              })
              .catch(error => console.error('Error fetching post title:', error));
          }
        });
      </script>
      <!-- Page Banner - End
        ================================================== -->

      <style>
        /* Loading Spinner */
        .loading-spinner {
          display: flex;
          justify-content: center;
          align-items: center;
          text-align: center;
          height: 80px;
          color: #fff;
          background-color: #556a5f;
          font-size: 18px;
          font-weight: bold;
          border-radius: 8px;
          margin-bottom: 20px;
        }

        /* Hide by default */
        .hidden {
          display: none;
        }

        /* Error message styling */
        .error-message {
          text-align: center;
          color: #ff4d4d;
          font-size: 18px;
          font-weight: bold;
          margin-top: 20px;
        }

        .details_image img {
          width: 100%;
          max-height: 550px;
          /* Set a maximum width */
          height: auto;
          /* Maintain aspect ratio */
          display: block;
          margin: 0 auto;
          /* Center the image */
          border-radius: 8px;
          /* Optional: Add rounded corners */
        }
      </style>


      <!-- Blog Details Section - Start
        ================================================== -->
      <section class="blog_details_section section_space_lg pb-0" style="padding-top:0;">
        <div class="container">
          <div class="row">
            <div class="col-lg-12">
              <!-- Loading Indicator -->
              <div id="loading" class="loading-spinner">
                Loading blog post...
              </div>

              <!-- Error Message -->
              <div id="error-message" class="error-message hidden">
                Oops! The blog post was not found or an error occurred.
              </div>

              <!-- Blog Post Details -->
              <div id="blog-post-details" class="hidden">
                <div id="post-image" class="details_image"></div>
                <div class="details_content">
                  <ul class="post_meta unordered_list mb-4">
                    <li><i class="fa-regular fa-calendar-days"></i> <span id="post-date">Loading...</span></li>
                    <li><i class="fa-regular fa-user-circle"></i> <span id="post-author">Loading...</span></li>
                    <li><i class="fa-regular fa-tags"></i> <span id="post-category">Loading...</span></li>
                  </ul>
                  <h3 id="post-title" class="details_info_title">Loading...</h3>
                  <div id="post-content"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- Blog Details Section - End
        ================================================== -->

      <!-- Blog Section - Start
        ================================================== -->
      <section class="blog_section section_space_lg" style="background-color: white;">
        <div class="container">
          <div class="section_heading">
            <h2 class="section_heading_text mb-0">Recommended Articles</h2>
          </div>
          <div class="row" id="recommended-articles"></div>
        </div>
      </section>
      <!-- Blog Section - End
        ================================================== -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.10/purify.min.js"></script>
      <script>
        document.addEventListener('DOMContentLoaded', function () {
          function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
          }

          const postSlug = getQueryParam('slug');

          const blogPostDetails = document.getElementById('blog-post-details');
          const loadingIndicator = document.getElementById('loading');
          const errorMessage = document.getElementById('error-message');
          const recommendedArticlesContainer = document.getElementById('recommended-articles');

          if (postSlug) {
            const postApiUrl = `https://blog.mindwellcounselling.ca/wp-json/wp/v2/posts?slug=${postSlug}&_embed`;

            fetch(postApiUrl)
              .then(response => response.json())
              .then(posts => {
                if (posts.length > 0) {
                  const post = posts[0];

                  // Hide loading spinner
                  loadingIndicator.classList.add('hidden');
                  blogPostDetails.classList.remove('hidden');

                  // Title
                  document.getElementById('post-title').innerHTML = post.title.rendered;

                  // Author
                  const authorName = post._embedded.author ? post._embedded.author[0].name : 'Unknown Author';
                  document.getElementById('post-author').textContent = `By ${authorName}`;

                  // Date
                  const postDate = new Date(post.date).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
                  document.getElementById('post-date').textContent = postDate;

                  // Category
                  const postCategory = post._embedded['wp:term'] && post._embedded['wp:term'][0].length > 0 ? post._embedded['wp:term'][0][0].name : 'Uncategorized';
                  document.getElementById('post-category').textContent = postCategory;

                  // Featured Image
                  if (post._embedded['wp:featuredmedia']) {
                    const featuredMedia = post._embedded['wp:featuredmedia'][0];
                    const imageUrl = featuredMedia.source_url;
                    const imageAlt = featuredMedia.alt_text || post.title.rendered;
                    document.getElementById('post-image').innerHTML = `<img src="${imageUrl}" alt="${imageAlt}" style="object-fit: cover; width: 100%; border-radius: 8px;">`;
                  } else {
                    document.getElementById('post-image').style.display = 'none';
                  }

                  // Content
                  const sanitizedContent = DOMPurify.sanitize(post.content.rendered);
                  document.getElementById('post-content').innerHTML = sanitizedContent;

                  // Fetch Recommended Articles
                  fetchRecommendedArticles();
                } else {
                  showError();
                }
              })
              .catch(error => {
                console.error('Error fetching post:', error);
                showError();
              });

          } else {
            showError();
          }

          function showError() {
            loadingIndicator.classList.add('hidden');
            errorMessage.classList.remove('hidden');
            blogPostDetails.classList.add('hidden');
          }

          function fetchRecommendedArticles() {
            fetch('https://blog.mindwellcounselling.ca/wp-json/wp/v2/posts?_embed&per_page=3')
              .then(response => response.json())
              .then(posts => {
                recommendedArticlesContainer.innerHTML = ''; // Clear previous content
                if (posts.length === 0) return;

                posts.forEach(post => {
                  const postDate = new Date(post.date).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
                  const postCategory = post._embedded['wp:term'] ? post._embedded['wp:term'][0][0].name : 'Uncategorized';
                  const postImage = post._embedded['wp:featuredmedia'] ? post._embedded['wp:featuredmedia'][0].source_url : 'assets/images/blogs/blog_image_9-min.jpg';
                  const postLink = `blog_details.html?slug=${post.slug}`;

                  const articleHTML = `
                                <div class="col-lg-4">
                                    <div class="blog_item">
                                        <div class="blog_image">
                                            <a class="blog_image_wrap" href="${postLink}">
                                                <img src="${postImage}" alt="${post.title.rendered}">
                                            </a>
                                        </div>
                                        <div class="blog_content">
                                            <ul class="post_category unordered_list">
                                                <li><a href="#!">${postCategory}</a></li>
                                            </ul>
                                            <ul class="post_meta unordered_list">
                                                <li>${postDate}</li>
                                                <li><a href="#!">120 Views</a></li>
                                                <li><a href="#!">No Comments</a></li>
                                            </ul>
                                            <h3 class="item_title">
                                                <a href="${postLink}">
                                                    ${post.title.rendered}
                                                </a>
                                            </h3>
                                            <p>${post.excerpt.rendered.replace(/<[^>]*>?/gm, '').substring(0, 100)}...</p>
                                            <a class="btn-link" href="${postLink}">
                                                <span class="btn_text">Read More</span>
                                                <span class="btn_icon"><i class="fa-solid fa-arrow-up-right"></i></span>
                                            </a>
                                        </div>
                                    </div>
                                </div>`;

                  recommendedArticlesContainer.insertAdjacentHTML('beforeend', articleHTML);
                });
              });
          }
        });
      </script>
    </main>
    <!-- Main Body - End
      ================================================== -->

    <!-- Site Footer - Start
      ================================================== -->
      <footer class="site_footer bg_primary">
        <div class="container">
          <div class="site_footer_content">
            <div class="row align-items-center">
              <div class="col-lg-3">
                <div class="site_logo">
                  <a class="site_link" href="index.html">
                    <img
                      src="https://res.cloudinary.com/df2fe2yzk/image/upload/w_120,h_80/v1729085828/Mindwell_logo-16_oazzsn.svg"
                      alt="Site Logo – Mindwell – Psychotherapist Site Template" width="200" height="100">
                  </a>
                </div>
              </div>
              <div class="col-lg-6">
                <ul class="info_list unordered_list justify-content-center">
                  <li>
                    <a href="index.html">
                      <span class="info_icon">
                        <i class="fa-solid fa-circle"></i>
                      </span>
                      <span class="info_text">Home</span>
                    </a>
                  </li>
                  <li>
                    <a href="Trauma-Counselling.html">
                      <span class="info_icon">
                        <i class="fa-solid fa-circle"></i>
                      </span>
                      <span class="info_text">Counselling</span>
                    </a>
                  </li>
                  <li>
                    <a href="about.html">
                      <span class="info_icon">
                        <i class="fa-solid fa-circle"></i>
                      </span>
                      <span class="info_text">About</span>
                    </a>
                  </li>
                  <li>
                    <a href="contact.html">
                      <span class="info_icon">
                        <i class="fa-solid fa-circle"></i>
                      </span>
                      <span class="info_text">Contact</span>
                    </a>
                  </li>
                </ul>
              </div>
              <!-- <div class="col-lg-3">
                <ul class="social_links unordered_list justify-content-center justify-content-lg-end">
                  <li><a href="#!"><i class="fa-brands fa-facebook-f"></i></a></li>
                  <li><a href="#!"><i class="fa-brands fa-instagram"></i></a></li>
                  <li><a href="#!"><i class="fa-brands fa-twitter"></i></a></li>
                  <li><a href="https://wa.me/+12369873429"><i class="fa-brands fa-whatsapp"></i></a></li>
                </ul>
              </div> -->
            </div>
          </div>
          <div class="copyright_widget text-center">
            <p class="copyright_text m-0">© <b>Mindwell </b> 2025 All Rights Reserved.</p>
          </div>
        </div>
      </footer>
      ================================================== -->

          </div>
          <!-- Body Wrap - End -->

          <!-- Fraimwork - Jquery Include -->
          <script src="assets/js/jquery.min.js"></script>
          <script src="assets/js/popper.min.js"></script>
          <script src="assets/js/bootstrap.min.js"></script>
          <script src="assets/js/bootstrap-dropdown-ml-hack.min.js"></script>

          <!-- animation - jquery include -->
          <script src="assets/js/cursor.min.js"></script>

          <!-- Carousel - Jquery Include -->
          <script src="assets/js/slick.min.js"></script>

          <!-- Video & Image Popup - Jquery Include -->
          <script src="assets/js/magnific-popup.min.js"></script>

          <!-- Counter - Jquery Include -->
          <script src="assets/js/appear.min.js"></script>
          <script src="assets/js/odometer.min.js"></script>

          <!-- Custom - Jquery Include -->
          <script src="assets/js/main.js"></script>

</body>

</html>